---
title: "p8105_hw2_yl5829"
output: html_document
date: "2024-10-01"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

## R Markdown

#Problem 1

```{r}
#load the data in relative path
nyc <- read_csv("data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", na = c(".", "NA", ""))
head(nyc)
```


```{r}
#clean the data
nyc_clean <- nyc %>%
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, station_longitude, 
         route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, 
         entry, vending, entrance_type, ada) %>%
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))

#look at the cleaned data
head(nyc_clean)
```

```{r}
#check for column names
colnames(nyc)
#check for number of column
ncol(nyc)
#check for dimension of cleaned data
dim(nyc_clean)
```

The dataset contains 32 variables and it mainly focuses on the subway entrances and exits in the NYC transit system. The variables included are line name, station name, geographic information (latitude and longitude), various routes served by the station (up to 11 routes), entry type, vending machine availability, some street, entrance type and geographic information (latitude, longitude, and location), and ADA compliance. After loading the data I use janitor::clean_names() function to convert all the variable to lower case and replaced spaces with underscores  to better performe next step. I next select relevant variables and transformed the entry column, which initially contained "YES" and "NO" values, into a logical variable (TRUE for "YES" and FALSE for "NO"). I also handled the missing values by specify any missing value to be NA in the data.
After clean there are 1868 rows and 19 columns in total. The data is tidy as each variable is stored in its own column, each observation is in its own row, and the dataset is organized for further analysis.

```{r}
#the number of distinct stations
distinct_stations <- nyc_clean %>%
  distinct(station_name, line) %>%
  nrow()

#see the output
distinct_stations
```
There are 465 distinct stations.

```{r}
#the number of ADA compliant stations
ada_compliant <- nyc_clean %>%
  filter(ada == "TRUE") %>%
  distinct(station_name, line) %>%
  nrow()

#see the output
ada_compliant
```
There are 84 ADA compliant.

```{r}
#proportion of station entrances / exits without vending allow entrance
proportion <- nyc_clean %>%
  filter(vending == "NO" & entry == TRUE) %>%
  nrow() / nrow(nyc_clean)

# Output the proportion
proportion
```
There is 0.0369 station entrances / exits without vending allow entrance

```{r}
#convert all route columns to character type
nyc_clean <- nyc_clean %>%
  mutate(across(starts_with("route"), as.character))

#reshape the data
nyc_routes <- nyc_clean %>%
  pivot_longer(cols = starts_with("route"), names_to = "route_number", values_to = "route_name") %>%
  filter(!is.na(route_name))

#look at the reshaped data
head(nyc_routes)
```

```{r}

```

